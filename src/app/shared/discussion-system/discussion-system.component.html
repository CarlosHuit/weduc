<div class="m-c-comments">


  <div *ngIf="!(loadingComments$ | async)">
    
    
    <!-- AddComment -->
    <div class="m-c-container-addComment">
      <app-write-comment></app-write-comment>
    </div>


    <!-- AllComments -->
    <div class="m-c-container-comments" *ngIf="!(loadingComments$ | async)">

      <div class="m-c-container-comment" *ngFor="let item of comments$ | async">

        <!----- box comments ----->
        <app-comment
          [data]="item"
          [answers]="item.answers_id.answers.length"
          >
        </app-comment>
        <div class="m-c-container-answers" >

          <!----- box answers ----->
          <div class="m-c-answers" >

            <div *ngIf="item.answers_id.answers.length > 0 && !(showAnswers$ | async)[item._id]" >

              <p
                class="m-c-msg-show-answers"
                (click)="showAnswersOf(item._id)"
                >
                Ver todas las respuestas
              </p>

            </div>

            <div *ngIf="item.answers_id && (showAnswers$ | async)[item._id]">

              <app-answer
                *ngFor="let answer of item.answers_id.answers; let i=index"
                [data]="answer"
                [comment_id]="item._id"
                [indexAnswer]="i"
                >
              </app-answer>

            </div>

          </div>

          <p
            *ngIf="
              (showAnswers$ | async)[item._id]
              && (writeAnswerFor$ | async) !== item._id
              && item.answers_id.answers.length > 0"
            class="m-c-msg-hide-answers"
            (click)="hideAnswersOf(item._id)"
            >
            Ocultar todas las respuestas
          </p>

          <!----- Write answer  ----->
          <div class="m-c-answers" *ngIf="(writeAnswerFor$ | async) === item._id ">
            <app-write-answer 
              [commentId]="item._id"
              >
            </app-write-answer>
          </div>


          <div class="m-c-comment-guide"></div>
          <div class="m-c-container-buttons-answer">

            <button
              mat-raised-button
              class="m-c-btn-write-answer"
              *ngIf="(writeAnswerFor$ | async) !== item._id"
              (click)="writeAnswerFor(item._id)"
              >
              Responder
            </button>
  
            <button
              mat-button
              color="primary"
              class="m-c-btn-hide-write-answer"
              (click)="writeAnswerFor('')"
              *ngIf="(writeAnswerFor$ | async) === item._id"
              >
              Ocultar
            </button>

          </div>

        </div>


      </div>

    </div>


  </div>


  <!-- Spinner -->
  <div class="m-c-spinner center" *ngIf="(loadingComments$ | async)" >

    <div class="box-spinner">
      <mat-spinner></mat-spinner>
    </div>

  </div>


</div>


<div *ngFor="let item of items; let i=index" >

</div>